<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>V-Shark Dashboard</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&family=Poppins:wght@100;200;400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <!-- <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet"> -->

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center">
    <div class="d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo d-flex align-items-center">
        <img src="assets/img/logo.png" alt="">
        <span class="d-none d-lg-block">V-Shark</span>
      </a>
    </div>

    <nav class="header-nav ms-auto">
      <a class="nav-link collapsed" data-bs-target="#forms-nav" data-bs-toggle="collapse" href="#" style="color:#cfe0ff;">
        <i class="bi bi-box-arrow-right"></i>
        <span>Sign Out</span>
      </a>
    </nav>
  </header>
  <!-- End Header -->

  <!-- =========//// Main Canvas //// ========== -->
  <main id="main" class="main">

    <div class="machinetitle">
      <h1 id="machineName"></h1>
    </div><!-- End Page Title -->

    <section class="section dashboard mt-5">
      <div class="row">

        <!-- Left side columns -->
        <div class="col-lg-12">
          <div class="row">

            <!--Stats Card -->
            <div class="col-xxl-3 col-md-3">
              <div class="card info-card sales-card">
                <div class="card-body">
                  <div class="d-flex align-items-center card-content">
                    <h1 class="card-stats" id="vscore"></h1>
                  </div>
                  <h5 class="card-title">V - Score</h5>
                </div>
              </div>
            </div>
            <!-- End Stats Card -->

            <!--Stats Card -->
            <div class="col-xxl-3 col-md-3">
              <div class="card machine-card">
                <div class="dark-box">
                  <div class="section os">
                    <p class="section-flag">Disk Space</p>
                    <h6 id="c-drive"></h6>
                    <div class="progress mt-3">
                        <div class="progress-bar disk-fill" role="progressbar" style="width: 0%" aria-valuenow="49" aria-valuemin="0" aria-valuemax="100" id="progressbar"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- CPU Utilisation -->
            <div class="col-xxl-3 col-md-3">
              <div class="card machine-card">
                  <div class="dark-box">
                      <div class="section os">
                          <p class="section-flag">CPU Utilisation</p>
                          <h6></h6>
                          <div class="progress mt-3">
                              <div class="progress-bar bg-warning" role="progressbar" style="width: 88%" aria-valuenow="88" aria-valuemin="0" aria-valuemax="100"></div>
                          </div>
                      </div>
                  </div>
              </div>
            </div>

            <!--Free RAM -->
            <div class="col-xxl-3 col-md-3">
              <div class="card machine-card">
                  <div class="dark-box">
                      <div class="section os">
                          <p class="section-flag">Free RAM</p>
                          <h6></h6>
                          <div class="progress mt-3">
                              <div class="progress-bar bg-primary" role="progressbar" style="width: 92%" aria-valuenow="88" aria-valuemin="0" aria-valuemax="100"></div>
                          </div>
                      </div>
                  </div>
              </div>
            </div>
                    
          </div>
        </div>
        <!-- End Left side columns -->

        

        <div class="col-lg-12 results-container">

            <!-- Result Card -->
            <div class="card">
                <div class="card-body">
                    <!-- <h5 class="card-title" >System Metrics</h5> -->
                    <table class="table table-borderless machine-table">
                      <tr>
                        <td>#</td>
                        <th>Operating System</th>
                        <td>:</td>
                        <td id="os"></td>
                      </tr>
                      <tr>
                        <td>#</td>
                        <th>Local IP Address</th>
                        <td>:</td>
                        <td id="ip"></td>
                      </tr>
                      <tr>
                        <td>#</td>
                        <th>Mac Address</th>
                        <td>:</td>
                        <td id="mac"></td>
                      </tr>
                      <tr>
                        <td>#</td>
                        <th>Firewall Status</th>
                        <td>:</td>
                        <td id="firewall"></td>
                      </tr>
                      <tr>
                        <td>#</td>
                        <th>Antivirus Status</th>
                        <td>:</td>
                        <td id="av"></td>
                      </tr>
                      <tr>
                        <td>#</td>
                        <th>Windows Update Process Running</th>
                        <td>:</td>
                        <td id="update"></td>
                      </tr>
                      <tr>
                        <td>#</td>
                        <th>Open Ports</th>
                        <td>:</td>
                        <td id="ports"></td>
                      </tr>
                      <!-- <tr>
                        <td>#</td>
                        <th>Free RAM</th>
                        <td>:</td>
                        <td id="ram"></td>
                      </tr>
                      <tr>
                        <td>#</td>
                        <th>CPU Load</th>
                        <td>:</td>
                        <td id="cpu"></td>
                      </tr> -->
                    </table>

                </div>
            </div>

        </div>


      </div>
    </section>

    <!-- Command Execution Panel -->
    <section class="section ">
      <div class="section-title">
        <h2>Remote Command Execution</h2>
      </div>

      <div class="control-panel" id="controlPanel">
        <div class="applist">
          <div class="panel">
            <img src="assets/img/firewall.png"/>
            <h3>Firewall</h3>
          </div>
          <div class="panel">
            <img src="assets/img/av.png"/>
            <h3>Antivirus</h3>
          </div>
          <div class="panel">
            <img src="assets/img/update.png"/>
            <h3>Update Process</h3>
          </div>
          <!-- <div class="panel">
            <img src=""/>
            <h3>Firewall</h3>
          </div> -->
        </div>

        <!-- toggles -->
        <div class="actions">

          
          <div class="toggleSwitch">
            <p class="switch-label">Disabled</p>
            <label class="switch">
              <input type="checkbox">
              <span class="slider round"></span>
            </label>
            <p class="switch-label">Enabled</p>
          </div>


          <div class="toggleSwitch">
            <p class="switch-label">Disabled</p>
            <label class="switch">
              <input type="checkbox">
              <span class="slider round"></span>
            </label>
            <p class="switch-label">Enabled</p>
          </div>


          <div class="toggleSwitch">
            <p class="switch-label">Disabled</p>
            <label class="switch">
              <input type="checkbox">
              <span class="slider round"></span>
            </label>
            <p class="switch-label">Enabled</p>
          </div>


        </div>
      </div>
    </section>

    <!-- Process Blocker -->
    <section class="section section-light">
      <div class="section-title">
        <h2>Application Process Blocker</h2>
      </div>

      <div class="control-panel" id="controlPanel">
        <div class="applist">
          <div class="panel">
            <img src="assets/img/chrome.png"/>
            <h3>Google Chrome</h3>
          </div>
          <div class="panel">
            <img src="assets/img/firefox.png"/>
            <h3>Mozilla Firefox</h3>
          </div>
          <div class="panel">
            <img src="assets/img/edge.png"/>
            <h3>Microsoft Edge</h3>
          </div>
          <div class="panel">
            <img src="assets/img/brave.png"/>
            <h3>Brave Browser</h3>
          </div>
        </div>

        <!-- toggles -->
        <div class="actions">
          
          <div class="toggleSwitch">
            <p class="switch-label">Block</p>
            <label class="switch">
              <input type="checkbox">
              <span class="slider round"></span>
            </label>
            <p class="switch-label">Unblock</p>
          </div>

          <div class="toggleSwitch">
            <p class="switch-label">Block</p>
            <label class="switch">
              <input type="checkbox">
              <span class="slider round"></span>
            </label>
            <p class="switch-label">Unblock</p>
          </div>

          <div class="toggleSwitch">
            <p class="switch-label">Block</p>
            <label class="switch">
              <input type="checkbox">
              <span class="slider round"></span>
            </label>
            <p class="switch-label">Unblock</p>
          </div>

          <div class="toggleSwitch">
            <p class="switch-label">Block</p>
            <label class="switch">
              <input type="checkbox">
              <span class="slider round"></span>
            </label>
            <p class="switch-label">Unblock</p>
          </div>

        </div>
      </div>
    </section>
    <br><br>

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
    <div class="copyright">
      &copy; 2022 Copyright <strong><span>V Shark</span></strong> | Developed by Team JSA
    </div>
    <div class="credits">
      
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <!-- <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script> -->

  <script>

    function getQueryVariable(variable) {
      var query = window.location.search.substring(1);
      var vars = query.split('&');
      for (var i = 0; i < vars.length; i++) {
          var pair = vars[i].split('=');
          if (decodeURIComponent(pair[0]) == variable) {
              return decodeURIComponent(pair[1]);
          }
      }
      console.log('Query variable %s not found', variable);
    }

    var deviceSpecificMacAddress = getQueryVariable('mac');

    $(document).ready(function () {     
      $.getJSON("https://v-shark.herokuapp.com/data",function (data) {          
          $.each(data, function (key, value) {
            if(value.mac == deviceSpecificMacAddress) {
              document.getElementById('vscore').innerHTML = value.vscore;
              document.getElementById('os').innerHTML = value.osname;
              document.getElementById('ip').innerHTML = value.ip;
              document.getElementById('mac').innerHTML = value.mac;
              document.getElementById('firewall').innerHTML = value.firewall_status;
              document.getElementById('av').innerHTML = value.antivirus_installed;
              document.getElementById('update').innerHTML = value.update_process;
              document.getElementById('ports').innerHTML = value.openport;
              document.getElementById('c-drive').innerHTML = value.c_drive;
              document.getElementById('machineName').innerHTML = value.machinename;

              cDrive = value.c_drive;
              var occupied = cDrive.split('/')[0].trim().slice(0,-2);
              var total = cDrive.split('/')[1].trim().slice(0,-2);

              document.getElementById("progressbar").setAttribute('style',`width:${(occupied/total)*100}%;`);

            }  
          });
      });
    });
  </script>

</body>

</html>